<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Inicio - Aliros</title>
    <div th:replace="~{fragments :: head}"></div>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>

    <link th:href="@{/css/style.css}" rel="stylesheet">

    <style>
        body {
            background-color: #f8f9fa;
        }

        /* Estilos específicos del Dashboard */
        .card-dash {
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: none;
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            background-color: white;
        }

        .card-dash:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.08) !important;
        }

        .icon-large {
            font-size: 3.5rem;
            opacity: 0.1;
            position: absolute;
            right: 15px;
            bottom: 10px;
            transition: all 0.3s ease;
        }

        .card-dash:hover .icon-large {
            opacity: 0.2;
            transform: scale(1.1);
        }

        /* Colores de borde y acento */
        .border-left-danger { border-left: 6px solid #dc3545; }
        .border-left-warning { border-left: 6px solid #ffc107; }
        .border-left-primary { border-left: 6px solid #0d6efd; }
        .border-left-success { border-left: 6px solid #198754; }

        /* Logo central */
        .logo-home {
            height: 120px;
            margin-bottom: 20px;
            filter: drop-shadow(0 5px 15px rgba(0,0,0,0.1));
        }

        a.card-link { text-decoration: none; color: inherit; display: block; height: 100%; }

        .welcome-section {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.02);
        }

        /* Animación para alertar de pendientes */
        .pulse-stat {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>

<div th:replace="~{fragments :: menu('home')}"></div>

<div class="container-fluid container-90 mt-4">

    <div class="welcome-section text-center animate__animated animate__fadeInDown">
        <img th:src="@{/images/logoitcizq.png}" class="logo-home" alt="Aliros Logo">

        <h1 class="fw-bold display-5 mb-0" style="color: #212529; letter-spacing: -1px;">
            Bienvenido a <span style="background: linear-gradient(45deg, #0d6efd, #6610f2); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Aliros</span>
        </h1>
        <p class="text-muted fw-bold fs-5 text-uppercase mt-2" style="letter-spacing: 4px;" th:text="${nombreCentro}">CENTRO DE CONTROL</p>
        <hr class="mx-auto" style="width: 100px; height: 4px; border-radius: 2px; background: #dee2e6;">
    </div>

    <div class="row g-4 mb-5 animate__animated animate__fadeInUp">

        <div class="col-md-6 col-xl-3">
            <a href="/relevos" class="card-link">
                <div class="card card-dash shadow-sm h-100 border-left-danger">
                    <div class="card-body p-4 position-relative">
                        <div style="z-index: 2; position: relative;">
                            <h6 class="text-uppercase text-muted fw-bold small mb-3">Relevos</h6>
                            <div class="d-flex align-items-baseline">
                                <h2 class="mb-0 fw-bold text-danger display-5"
                                    th:classappend="${stats.relevosPendientes > 0} ? 'pulse-stat'"
                                    th:text="${stats.relevosPendientes}">0</h2>
                                <small class="text-danger fw-bold ms-2">Pendientes</small>
                            </div>
                            <p class="text-muted small mt-2 mb-0">Mensajes del turno anterior</p>
                        </div>
                        <i class="bi bi-chat-left-dots-fill icon-large text-danger"></i>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-md-6 col-xl-3">
            <a href="/paqueteria" class="card-link">
                <div class="card card-dash shadow-sm h-100 border-left-warning">
                    <div class="card-body p-4 position-relative">
                        <div style="z-index: 2; position: relative;">
                            <h6 class="text-uppercase text-muted fw-bold small mb-3">Correspondencia</h6>
                            <div class="d-flex align-items-baseline">
                                <h2 class="mb-0 fw-bold text-warning display-5"
                                    th:classappend="${stats.paquetesPendientes > 0} ? 'pulse-stat'"
                                    th:text="${stats.paquetesPendientes}">0</h2>
                                <small class="text-warning fw-bold ms-2">Paquetes</small>
                            </div>
                            <p class="text-muted small mt-2 mb-0">Pendientes de entrega</p>
                        </div>
                        <i class="bi bi-box-seam-fill icon-large text-warning"></i>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-md-6 col-xl-3">
            <a href="/keymoves" class="card-link">
                <div class="card card-dash shadow-sm h-100 border-left-primary">
                    <div class="card-body p-4 position-relative">
                        <div style="z-index: 2; position: relative;">
                            <h6 class="text-uppercase text-muted fw-bold small mb-3">Control de Llaves</h6>
                            <div class="d-flex align-items-baseline">
                                <h2 class="mb-0 fw-bold text-primary display-5"
                                    th:classappend="${stats.llavesPendientes > 0} ? 'pulse-stat'"
                                    th:text="${stats.llavesPendientes}">0</h2>
                                <small class="text-primary fw-bold ms-2">Fuera</small>
                            </div>
                            <p class="text-muted small mt-2 mb-0">Registros sin devolver</p>
                        </div>
                        <i class="bi bi-key-fill icon-large text-primary"></i>
                    </div>
                </div>
            </a>
        </div>

        <div class="col-md-6 col-xl-3">
            <a href="/movimientos" class="card-link">
                <div class="card card-dash shadow-sm h-100 border-left-success">
                    <div class="card-body p-4 position-relative">
                        <div style="z-index: 2; position: relative;">
                            <h6 class="text-uppercase text-muted fw-bold small mb-3">Ocupación Planta</h6>
                            <div class="d-flex align-items-baseline">
                                <h2 class="mb-0 fw-bold text-success display-5"
                                    th:text="${stats.visitasDentro + stats.contratasDentro}">0</h2>
                                <small class="text-success fw-bold ms-2">Personas</small>
                            </div>
                            <p class="text-muted small mt-2 mb-0">Personal actualmente dentro</p>
                        </div>
                        <i class="bi bi-people-fill icon-large text-success"></i>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <div class="row justify-content-center mt-2 pb-5 animate__animated animate__fadeIn">
        <div class="col-auto mb-3">
            <a href="/incidencias/nueva" class="btn btn-danger btn-lg px-5 shadow-sm fw-bold rounded-pill">
                <i class="bi bi-exclamation-triangle-fill me-2"></i> REPORTE DE INCIDENCIA
            </a>
        </div>
        <div class="col-auto mb-3">
            <a href="/telefonos/nuevo" class="btn btn-dark btn-lg px-5 shadow-sm fw-bold rounded-pill">
                <i class="bi bi-telephone-plus-fill me-2"></i> AVISO TELEFÓNICO
            </a>
        </div>
    </div>

</div>

<div th:replace="~{fragments :: bloquearNavegacion}"></div>

</body>
</html>