<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Datos de Usuario</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">

  <!-- CSS GLOBAL -->
  <link th:href="@{/css/style.css}" rel="stylesheet">
</head>
<body>

<div th:replace="~{fragments :: menu('usuarios')}"></div>

<div class="container-fluid form-container-60">

  <div class="card shadow-lg card-form border-top border-4" style="border-top-color: #0d6efd !important;">
    <div class="card-header bg-white py-3 border-bottom-0">
      <h4 class="mb-0 fw-bold" style="color: #0d6efd;">
        <i class="bi bi-person-gear me-2"></i>
        <span th:text="${usuarioEdicion.dni != null ? 'EDITAR USUARIO' : 'ALTA DE NUEVO USUARIO'}">
            Datos de Usuario
        </span>
      </h4>
    </div>

    <div class="card-body p-4 pt-2">
      <form th:action="@{/admin/usuarios/guardar}" th:object="${usuarioEdicion}" method="post">

        <div class="row g-3 mb-3">
          <div class="col-md-6">
            <label class="form-label fw-bold text-secondary small">DNI (LOGIN)</label>
            <input type="text" th:field="*{dni}" class="form-control bg-light" required
                   th:readonly="${usuarioEdicion.dni != null}" placeholder="12345678X"/>
          </div>
          <div class="col-md-6">
            <label class="form-label fw-bold text-secondary small">CONTRASEÑA</label>
            <input type="password" th:field="*{clave}" class="form-control bg-light" placeholder="Dejar en blanco para no cambiar" />
            <div class="form-text small fst-italic">
              <i class="bi bi-info-circle"></i> Si escribe aquí, se reseteará la clave actual.
            </div>
          </div>
        </div>

        <div class="row g-3 mb-3">
          <div class="col-md-4">
            <label class="form-label fw-bold text-secondary small">NOMBRE</label>
            <input type="text" th:field="*{nombre}" class="form-control bg-light" required/>
          </div>
          <div class="col-md-4">
            <label class="form-label fw-bold text-secondary small">1º APELLIDO</label>
            <input type="text" th:field="*{apellido1}" class="form-control bg-light" required/>
          </div>
          <div class="col-md-4">
            <label class="form-label fw-bold text-secondary small">2º APELLIDO</label>
            <input type="text" th:field="*{apellido2}" class="form-control bg-light"/>
          </div>
        </div>

        <hr class="my-4 text-muted">

        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label fw-bold text-secondary small">CENTRO ASIGNADO</label>
            <select th:field="*{idCentro}" class="form-select bg-light" required>
              <option value="" disabled selected>-- Seleccione Centro --</option>
              <option th:each="c : ${listaCentros}" th:value="${c.id}" th:text="${c.denominacion}"></option>
            </select>
          </div>
          <div class="col-md-6">
            <label class="form-label fw-bold text-secondary small">ROL / PERMISOS</label>
            <select th:field="*{tipo}" class="form-select bg-light" required>
              <option value="U">Vigilante / Operario</option>
              <option value="Y">Gestor / Supervisor</option>
              <option value="A">Administrativo</option>
              <option value="Z" class="fw-bold text-danger">ADMINISTRADOR TOTAL (Z)</option>
            </select>
          </div>
        </div>

        <div class="d-flex justify-content-end gap-2 border-top pt-4 mt-4">
          <a href="/admin/usuarios" class="btn btn-outline-secondary px-4">Cancelar</a>
          <button type="submit" class="btn text-white px-5 fw-bold shadow-sm" style="background-color: #0d6efd;">
            <i class="bi bi-save me-1"></i> Guardar Usuario
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<div th:replace="~{fragments :: bloquearNavegacion}"></div>

</body>
</html>